version: '3.8'

services:
  listmonk:
    build: .
    ports:
      - "9000:9000"
    environment:
      - LISTMONK_ADMIN_USERNAME=admin
      - LISTMONK_ADMIN_PASSWORD=admin123
      - DB_HOST=${DB_HOST}
      - DB_PORT=${DB_PORT:-6543}
      - DB_USER=${DB_USER}
      - DB_PASSWORD=${DB_PASSWORD}
      - DB_NAME=${DB_NAME:-postgres}
      - DB_SSL_MODE=${DB_SSL_MODE:-require}
      - DB_SCHEMA=${DB_SCHEMA:-listmonk}
      - DB_PARAMS=${DB_PARAMS:-statement_cache_mode=disable}
    volumes:
      - listmonk_uploads:/listmonk/uploads
    restart: unless-stopped

volumes:
  listmonk_uploads:
