{{ define "subscription-form" }}
{{ template "header" . }}

<section class="subscription-form-section">
    <h2>{{ L.T "public.subTitle" }}</h2>
    <p class="subtitle">Stay informed about Missouri Young Democrats news, events, and action opportunities.</p>

    <form method="post" action="" class="form">
        <div>
            <div class="form-group">
                <label for="email">{{ L.T "subscribers.email" }} <span class="required">*</span></label>
                <input id="email" name="email" required="true" type="email" placeholder="{{ L.T "subscribers.email" }}" autofocus="true" />
                <!-- Honeypot field for spam protection -->
                <input name="nonce" class="nonce" value="" />
            </div>

            <div class="form-group">
                <label for="name">{{ L.T "public.subName" }}</label>
                <input id="name" name="name" type="text" placeholder="{{ L.T "public.subName" }}" />
            </div>

            {{ if .Data.Lists }}
            <div class="form-group lists-group">
                <h3>{{ L.T "globals.terms.lists" }}</h3>
                <ul class="lists">
                    {{ range $i, $l := .Data.Lists }}
                        <li>
                            <input checked="true" id="l-{{ $l.UUID }}" type="checkbox" name="l" value="{{ $l.UUID }}" />
                            <label for="l-{{ $l.UUID }}">{{ $l.Name }}</label>
                            {{ if ne $l.Description "" }}
                                <p class="description">{{ $l.Description }}</p>
                            {{ end }}
                        </li>
                    {{ end }}
                </ul>
            </div>
            {{ end }}

            {{ if .Data.Captcha.Enabled }}
                <div class="captcha">
                    {{ if eq .Data.Captcha.Provider "hcaptcha" }}
                        <div class="h-captcha" data-sitekey="{{ .Data.Captcha.Key }}"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    {{ else if eq .Data.Captcha.Provider "altcha" }}
                        <altcha-widget challengeurl="{{ .RootURL }}/api/public/captcha/altcha"></altcha-widget>
                        <script type="module" src="{{ .RootURL }}/public/static/altcha.umd.js" async defer></script>
                    {{ end }}
                </div>
            {{ end }}

            <div class="form-actions">
                <button type="submit" class="button">{{ L.T "public.sub" }}</button>
            </div>

            {{ if .EnablePublicArchive }}
                <p class="right archive-link">
                    <a href="{{ .RootURL }}/archive">{{ L.T "public.archiveTitle" }}</a>
                </p>
            {{ end }}

            <p class="privacy-notice">We respect your privacy and will never share your information.</p>
        </div>
    </form>
</section>

{{ template "footer" . }}
{{ end }}
